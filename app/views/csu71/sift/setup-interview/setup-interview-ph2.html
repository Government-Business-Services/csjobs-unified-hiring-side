{% extends "layouts/main.html" %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% block header %}
{% include '/csu71/includes/header.html' %}
{% endblock %}

{% block beforeContent %}
<div  style="width:100%;background:#1d70b8;height:45px;border-bottom:0.5px solid #1d70b8;float:left">

  <!-- <div class="govuk-!-margin-top-3" style="float:left;width:40%;margin-left:30px;"><span class="govuk-body-m" style="background:white;border:1px solid #1d70b8;border-radius:5px;padding:7px"><a class="govuk-link  govuk-link--no-underline govuk-link--no-visited-state" style="color:#1d70b8" href="job-library"><strong>Create a new vacancy</strong></a></span>
</div> -->
<span style="float:left;padding-left:10px;color:white;font-weight:bold" class="govuk-caption-l">Interview</span>

<div class="" style="position:relative;float:right;margin-right:20px;margin-top:5px;">


  <span class="govuk-body-m" style="background:white;border:1px solid #1d70b8;border-radius:5px;padding:7px"><a class="govuk-link  govuk-link--no-underline govuk-link--no-visited-state" style="color:#1d70b8;padding-left:8px;padding-right:8px" href="/csu71/sift/task-list"><strong>Return to task list</strong></a></span>

</div>

</div>
{{ govukBackLink({
  text: "Back",
  href: "javascript:window.history.back()"
}) }}
{% endblock %}

{% block content %}




<form class="form" action="setup-interview-ph2-1" method="post">

  <H1 style=";padding-top:20px;padding-bottom:5px;border-bottom:1px solid #1d70b8; " class="govuk-heading-xl govuk-!-margin-top-0 govuk-!-margin-bottom-6">PH2</H1>


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-quarter" style="">


      <ul class="govuk-!-margin-top-6 govuk-list govuk-list--bullet-">
        <li><strong><p style ="border-left:5px solid white;padding-left:10px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview"><strong>Setup interview</a></p></strong></li>
        <li><strong><p style ="border-left:5px solid white;;padding-left:10px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview-ph1"><strong>ph1</a></p></strong></li>
        <li><strong><p style ="border-left:5px solid #1d70b8;padding-left:30px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview-ph2"><strong>Scheduling</a></p></strong></li>
        <li><strong><p style ="border-left:5px solid white;padding-left:10px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview-ph3"><strong>ph3</a></p></strong></li>
        <li><strong><p style ="border-left:5px solid white;padding-left:10px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview-ph4"><strong>ph4</a></p></strong></li>
        <li><strong><p style ="border-left:5px solid white;padding-left:10px" class="govuk-body-m"><a class="govuk-link govuk-link--no-underline govuk-link govuk-link--no-visited-state" href="setup-interview-ph5"><strong>ph5</a></p></strong></li>
      </ul>
    </div>
    <div class="govuk-!-margin-top-6 govuk-grid-column-three-quarters">

      <h3 class="govuk-heading-m govuk-!-margin-bottom-6">Scheduling</h3>


        <div class="govuk-form-group" style="">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              <h1 class="govuk-fieldset__heading">
      Are you still planning to begin interviews on 07 Aug 2023?
              </h1>
            </legend>
            <div class="govuk-radios govuk-radios--inline" data-module="govuk-radios">
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="timing" name="timing" type="radio" value="yes">
                <label class="govuk-label govuk-radios__label" for="timing">
                  Yes
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="timing" name="timing" type="radio" value="no">
                <label class="govuk-label govuk-radios__label" for="timing">
                  No, they've changed
                </label>
              </div>
                  </div>
          </fieldset>
        </div>

        <div id="conditional" style="display:none">

            {% from "govuk/components/date-input/macro.njk" import govukDateInput %}
            {{ govukDateInput({
            id: "launch",
            namePrefix: "",
            items: [
            {
              classes: "govuk-input--width-2",
              name: "day",
              value: "7" or data['day']
            },
            {
              classes: "govuk-input--width-2",
              name: "month",
              value: "Aug" or data['month']
            },
            {
              classes: "govuk-input--width-4",
              name: "year",
              value: "2023" or data['year']
            }
            ]
            }) }}

            <!-- <p class="govuk-body-m">How many working days (Mon-Fri) will the interview schedule last for?</p> -->
      </div>




      <form>

        <div class="govuk-form-group" style="padding-top:35px;border-top:1px solid lightgrey">
          <label class="govuk-label" for="width-2">
            <strong>How many working days should the schedule continue for?</strong>
          </label>
          <input class="govuk-input govuk-input--width-2" value="{{ data['duration']}}" id="duration" name="duration" type="text">
        </div>


        <div class="govuk-form-group" style="padding-top:35px;border-top:1px solid lightgrey">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              <h3 class="govuk-fieldset__heading">
                What is the maximum number of interviews you're willing to do in a day?
              </h3>
            </legend>
            <div class="govuk-radios govuk-radios--inline" data-module="govuk-radios">
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="density-2" name="density" type="radio" value="2">
                <label class="govuk-label govuk-radios__label" for="density-2">
                  2
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="density-4" name="density" type="radio" value="4">
                <label class="govuk-label govuk-radios__label" for="density-4">
                  4
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="density-6" name="density" type="radio" value="6">
                <label class="govuk-label govuk-radios__label" for="density-6">
                  6
                </label>
              </div>


            </div>
          </fieldset>
        </div>

        <div class="govuk-form-group" style="padding-top:35px;border-top:1px solid lightgrey">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              <h1 class="govuk-fieldset__heading">
                As a panel, do you plan to spend 15 minutes after each interview to review and record scores and feedback?
              </h1>
            </legend>
            <div class="govuk-radios govuk-radios--inline" data-module="govuk-radios">
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="washup-yes" name="washup" type="radio" value="yes">
                <label class="govuk-label govuk-radios__label" for="density-2">
                  Yes
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="washup-no" name="washup" type="radio" value="no">
                <label class="govuk-label govuk-radios__label" for="density-4">
                  No
                </label>
              </div>
                  </div>
          </fieldset>
        </div>


        <button class="govuk-button govuk-!-margin-top-9" data-module="govuk-button">Build interview schedule</button>






    </div>


  </div>

  <span id='local-variable' style="display:none">{{ data['templateName'] }}</span>

  <input type="hidden" name="source" value="behaviours">
</FORM>



<script>






  const myObjectName = document.querySelector('#templateName');
  console.log(myObjectName.value)




  // var myObjectName = {{ data.templateName | dump | safe }};


  // const storedValue = document.getElementById("templateName");
  // function showingOffTag(thing) {
  //
  //   storedValue.textContent = thing;
  //
  //   console.log(storedValue)
  // }

  // var ddattag = document.getElementById("ddattag");
  // var cotag = document.getElementById("cotag");
  // var hotag = document.getElementById("hotag");




  var hea1 = document.getElementById("header1");


  const object = JSON.parse(window.sessionStorage.getItem("behaviours"));
  var obj0 = Object.values(object.level0);
  var level = obj0;

  for (var t=0;t<level.length;t++) {

    var hintText = level[t].description;


    var label = document.createElement("label");
    var checkBox = document.createElement("input");
    var hint = document.createElement("hint");
    checkBox.type = "checkbox";
    checkBox.style.cssText = "width: 30px;height: 30px;padding: 0;margin: 0;vertical-align: bottom;position: relative;top: -30px;";
    label.style.cssText = "display: block;padding-left: 15px;padding-top:30px;text-indent: 40px;";
    hint.style.cssText = "display: block;padding-left: 55px;";
    checkBox.value = level[t].title;
    hint.value = level[t].description;
    checkBox.setAttribute("id","behaviours-"+t);
    checkBox.setAttribute("name","behaviours");

    label.appendChild(document.createTextNode(level[t].title));

    hea1.appendChild(label);


    hea1.appendChild(checkBox);
    hint.appendChild(document.createTextNode(level[t].description));
    hea1.appendChild(hint);
  }

  graSelecta("levelgrade");


  function graSelecta(grade){
    var grade = document.getElementById(grade).value;

    var hea1 = document.getElementById("header1");
    hea1.innerText = "";
    const object = JSON.parse(window.sessionStorage.getItem("behaviours"));


    var level;
    var obj0 = Object.values(object.level0);
    var obj1 = Object.values(object.level1);
    var obj2 = Object.values(object.level2);
    var obj3 = Object.values(object.level3);
    var obj4 = Object.values(object.level4);


    if (grade == "level0") {
      level = obj0;
    }


    if (grade == "level1") {
      level = obj1;

    } else if (grade == "level2") {
      level = obj2;

    } else if (grade == "level3") {
      level = obj3;
    }   else if (grade == "level4") {
      level = obj4;
    }




    for (var t=0;t<level.length;t++) {
      var hintText = level[t].description;

      var label = document.createElement("label");
      var checkBox = document.createElement("input");
      var hint = document.createElement("hint");
      checkBox.type = "checkbox";
      checkBox.style.cssText = "width: 30px;height: 30px;padding: 0;margin: 0;vertical-align: bottom;position: relative;top: -30px;";
      label.style.cssText = "display: block;padding-left: 15px;padding-top:30px;text-indent: 40px;";
      hint.style.cssText = "display: block;padding-left: 55px;";
      checkBox.value = level[t].title;


      hint.value = level[t].description;
      checkBox.setAttribute("id","behaviours-"+t);
      checkBox.setAttribute("name","behaviours");
      hint.setAttribute("id",level[t].title);
      hint.setAttribute("name",grade);
      label.appendChild(document.createTextNode(level[t].title));

      hea1.appendChild(label);


      hea1.appendChild(checkBox);
      hint.appendChild(document.createTextNode(level[t].description));
      hea1.appendChild(hint);

      if (myObjectName.value == "ddat"){
        if (level[t].title == "Seeing the big picture" || level[t].title == "Changing and improving" || level[t].title == "Delivering at Pace" || level[t].title == "Communicating and Influencing"){
          label.setAttribute("class","experiment");

          checkBox.checked = "true";
        }
      }


    }
  }


  function checkCheckBoxes() {
    var behaviourCheck = [];

    var checkboxB = document.getElementsByTagName('input');

    for (i = 0; i < checkboxB.length; i++) {
      var checkCt = checkboxB[i].checked.length;
      if (checkboxB[i].type == 'checkbox' && checkboxB[i].checked ) {
        behaviourCheck.push(checkboxB[i].value);
        window.sessionStorage.setItem("BehavioursSelected", JSON.stringify(behaviourCheck));
      }
    }


  }

  const dwqq = JSON.parse(window.sessionStorage.getItem("BehavioursSelected"));


  const keyDetails = {};
  var keyD = JSON.parse(window.sessionStorage.getItem("keyDetails"));

  // const title = document.getElementById("title").value;
  // const grade = document.getElementById("newgrade").value
  // const profession = document.getElementById("grabProf").value;
  // const department = document.getElementById("dept").value;

  // console.log(keyD)

  keyDetails.title = keyD.jobTitle;
  keyDetails.grade = keyD.grade;
  keyDetails.profession = keyD.profession;
  keyDetails.department = keyD.department;



  //     var tempSelected = document.getElementById("templateName").value;
  // keyDetails.template = tempSelected;
  //     console.log(tempSelected)


  // switch (keyDetails.profession) {
  //   case 'title':
  //   res.redirect('job-library')
  //   break
  //   case 'profession':
  //   res.redirect('job-library-profession')
  //   break
  // case 'skill':
  //   res.redirect('skills')
  //   break
  // }
  // })

















</script>


{% endblock %}
